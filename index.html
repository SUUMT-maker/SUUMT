<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>μ¨νΈλ μ΄λ„</title> <!-- v1.0.9 -->
    
    <!-- λ²„μ „ μ •λ³΄ μ—…λ°μ΄νΈ -->
    <meta name="version" content="1.0.9">
    
    <!-- Google Analytics 4 - μ¨νΈλ μ΄λ„ -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TFYK5NK44V"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-TFYK5NK44V');
    </script>
    
    <!-- π  λ„¤λΉ„κ²μ΄μ… νƒ­ μ „ν™ μ¤ν¬λ¦½νΈ -->
    <script>
        // π  λ„¤λΉ„κ²μ΄μ… νƒ­ μ „ν™ ν•¨μ (λ¶€λ“λ¬μ΄ νμ΄λ“ μ „ν™)
        function switchTab(tabName) {
            console.log('π”„ νƒ­ μ „ν™:', tabName);
            
            // λ¨λ“  λ„¤λΉ„κ²μ΄μ… λ²„νΌ λΉ„ν™μ„±ν™”
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // μ„ νƒλ λ„¤λΉ„κ²μ΄μ… λ²„νΌ ν™μ„±ν™”
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            // ν„μ¬ ν™μ„±ν™”λ ν™”λ©΄ μ°ΎκΈ°
            const currentScreen = document.querySelector('.screen.active');
            
            // μƒ ν™”λ©΄ κ²°μ •
            let newScreen = null;
            if (tabName === 'home') {
                newScreen = document.getElementById('mainScreen');
            } else if (tabName === 'workout') {
                newScreen = document.getElementById('workoutModeScreen');
            } else if (tabName === 'records') {
                // κΈ°λ΅ νƒ­μ€ μ•„μ§ κ°λ° μ¤‘
                console.log(`${tabName} νƒ­μ€ λ‹¤μ λ‹¨κ³„μ—μ„ κ°λ° μμ •`);
                return;
            } else if (tabName === 'profile') {
                newScreen = document.getElementById('profileScreen');
            }
            
            // μƒ ν™”λ©΄μ΄ μ—†κ±°λ‚ ν„μ¬ ν™”λ©΄κ³Ό κ°™μΌλ©΄ λ¦¬ν„΄
            if (!newScreen || currentScreen === newScreen) return;
            
            // ν„μ¬ ν™”λ©΄μ΄ μμΌλ©΄ νμ΄λ“ μ•„μ›ƒ
            if (currentScreen) {
                currentScreen.classList.add('fade-out');
                currentScreen.addEventListener('transitionend', function handler() {
                    currentScreen.classList.remove('active', 'fade-out');
                    currentScreen.removeEventListener('transitionend', handler);
                });
            }
            
            // μƒ ν™”λ©΄ νμ΄λ“ μΈ
            newScreen.classList.add('active');
        }

        // π’ μ΄λ™λ¨λ“ μ„ νƒ ν•¨μ (μ¨νΈλ μ΄λ‹ λ¨λ“ ν™”λ©΄μΌλ΅ μ „ν™)
        function selectWorkoutMode(mode) {
            console.log('π― μ΄λ™λ¨λ“ μ„ νƒ:', mode);
            if (mode === 'breathtraining') {
                // ν„μ¬ ν™μ„±ν™”λ ν™”λ©΄ μ°ΎκΈ°
                const currentScreen = document.querySelector('.screen.active');
                const newScreen = document.getElementById('breathTrainingScreen');
                
                // μƒ ν™”λ©΄μ΄ μ—†κ±°λ‚ ν„μ¬ ν™”λ©΄κ³Ό κ°™μΌλ©΄ λ¦¬ν„΄
                if (!newScreen || currentScreen === newScreen) return;
                
                // ν„μ¬ ν™”λ©΄μ΄ μμΌλ©΄ νμ΄λ“ μ•„μ›ƒ
                if (currentScreen) {
                    currentScreen.classList.add('fade-out');
                    currentScreen.addEventListener('transitionend', function handler() {
                        currentScreen.classList.remove('active', 'fade-out');
                        currentScreen.removeEventListener('transitionend', handler);
                    });
                }
                
                // μƒ ν™”λ©΄ νμ΄λ“ μΈ
                newScreen.classList.add('active');
                
                console.log('μ¨νΈλ μ΄λ‹ λ¨λ“ ν™”λ©΄μΌλ΅ μ „ν™λ¨');
            }
        }
    </script>
    
    <!-- π™ λ‹¤ν¬λ¨λ“ λ¬Έμ  ν•΄κ²°: μƒ‰μƒ μ¤ν‚¤λ§ κ³ μ • -->
    <meta name="color-scheme" content="light">
    <meta name="supported-color-schemes" content="light">
    
    <!-- π€ μΊμ‹ λ°©μ§€ λ° λ²„μ „ κ΄€λ¦¬ -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- single source of truth for app version -->
    <meta name="version" content="1.0.6">
    
    <!-- PWA λ©”νƒ€ νƒκ·Έ -->
    <meta name="description" content="μ¨νΈ νΈν΅μ΄λ™κΈ°κµ¬ μ „μ© κ°€μ΄λ“ μ•±">
    <meta name="keywords" content="μ¨νΈ, νΈν΅μ΄λ™κΈ°κµ¬, νΈν΅κ·Όμ΅νΈλ μ΄λ‹, νν™λ‰, νΈν΅κ·Όμ΅κ°•ν™”">
    <meta name="author" content="μ¨νΈλ μ΄λ„">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="μ¨νΈλ μ΄λ„">
    <meta name="application-name" content="μ¨νΈλ μ΄λ„">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- λ§¤λ‹νμ¤νΈ λ§ν¬ -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- νλΉ„μ½ λ° μ•„μ΄μ½ -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">
    <link rel="apple-touch-icon" href="/icons/icon-180x180.png">
    
    <!-- CSS νμΌ -->
    <link rel="stylesheet" href="css/main.css?v=1.0.9">
    <link rel="stylesheet" href="css/components.css?v=1.0.9">
    <link rel="stylesheet" href="css/screens.css?v=1.0.9">
    <link rel="stylesheet" href="css/mobile.css?v=1.0.9">
    
    <!-- Load Supabase SDK (v2.x) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.8/dist/umd/supabase.min.js"></script>
    <script>
        // Initialize Supabase Client once and store as supabaseClient
        if (!window.supabaseClient) {
            const supabaseUrl = 'https://rfqbzibewzvqopqgovbc.supabase.co';
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJmcWJ6aWJld3p2cW9wcWdvdmJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzNzIwNTMsImV4cCI6MjA2OTk0ODA1M30.nAXbnAFe4jM7F56QN4b42NhwNJG_iuSXOVM5zC72Bs4';
            window.supabaseClient = window.supabase.createClient(supabaseUrl, supabaseKey);
            console.log('β… Supabase client initialized:', window.supabaseClient);
        }
    </script>
    
    <!-- JavaScript νμΌ -->
    <script src="js/utils.js?v=1.0.9"></script>
    <script src="js/supabase-client.js?v=1.0.9"></script>
    <script src="js/app.js?v=1.0.9"></script>
    <script src="js/stats.js?v=1.0.9"></script>
    <script src="js/exercise.js?v=1.0.9"></script>
    <script src="js/quiz.js?v=1.0.9"></script>
    <script src="js/dashboard.js?v=1.0.9"></script>
    <script src="js/levelSystem.js"></script>
    <script src="js/profile.js"></script>

</head>
<body>
  <!-- λ΅κ·ΈμΈ ν™”λ©΄ -->
<div id="loginScreen" class="login-container">
  <img src="images/suumt-logo.png" class="app-logo" alt="SUUMT Logo"/>
  <h2>μ¨νΈλ μ΄λ„ μ‹μ‘ν•κΈ°</h2>
  <p class="login-subtitle">AIκ°€ λ¶„μ„ν•λ” κ°μΈ λ§μ¶¤ νΈν΅ κ°•ν™”!<br>μΉ΄μΉ΄μ¤ν†΅μΌλ΅ κ°„νΈν•κ² μ‹μ‘ν•΄λ³΄μ„Έμ”</p>
  <button id="loginKakaoBtn" class="kakao-login-btn">
    <div class="kakao-login-content">
      <svg class="kakao-icon" viewBox="0 0 24 24" fill="none">
        <path d="M12 3C7.03 3 3 6.16 3 10.08c0 2.53 1.66 4.76 4.19 6.05L6.5 19.5a.5.5 0 00.79.61l4.25-3.12c.49.07.98.11 1.46.11 4.97 0 9-3.16 9-7.08S16.97 3 12 3z" fill="currentColor"/>
      </svg>
      μΉ΄μΉ΄μ¤λ΅ μ‹μ‘ν•κΈ°
    </div>
  </button>
</div>

  <!-- ν™ ν™”λ©΄ (κΈ°μ΅΄ μ•±μ μ²« ν™”λ©΄ μ»¨ν…μ΄λ„) -->
  <div id="homeScreen" style="display:none;">
    <!-- π¬ 2λ‹¨κ³„ μ¨λ³΄λ”© μ¤ν”λμ‹ ν™”λ©΄ -->
<div id="introScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: linear-gradient(135deg, #CFEFFF 0%, #B8E8FF 50%, #A1E1FF 100%); display: flex; justify-content: center; align-items: center; z-index: 2000; opacity: 1; transition: opacity 0.8s ease-out; overflow: hidden;">
    
    <!-- μ „μ²΄ λ°°κ²½ λΈ”λ¬ ν¨κ³Όλ“¤ -->
    <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle at 20% 30%, rgba(46, 181, 250, 0.3) 0%, transparent 50%), radial-gradient(circle at 80% 70%, rgba(46, 181, 250, 0.2) 0%, transparent 50%), radial-gradient(circle at 40% 80%, rgba(46, 181, 250, 0.25) 0%, transparent 40%); animation: float 20s ease-in-out infinite;"></div>
    
    <!-- μ²« λ²μ§Έ μ¨λ³΄λ”© ν™”λ©΄ -->
    <div id="onboardingStep1" class="onboarding-step active" style="width: 375px; height: 812px; position: relative; overflow: hidden; display: flex;">
        <!-- λ©”μΈ μ½ν…μΈ  μ»¨ν…μ΄λ„ -->
        <div style="height: 702px; left: 20px; top: 61px; position: absolute; flex-direction: column; justify-content: flex-start; align-items: center; gap: 23px; display: inline-flex;">
            
            <!-- λ©”μΈ μ΄λ―Έμ§€ -->
            <div style="width: 335px; height: 419px; position: relative; overflow: hidden; border-radius: 12px;">
                <img src="./images/suumt-usage.png" alt="μ¨νΈ μ‚¬μ© λ¨μµ" style="width: 350px; height: 525px; left: -5px; top: -33px; position: absolute; object-fit: cover;" onerror="this.style.display='none';">
            </div>
            
            <!-- ν…μ¤νΈ λ° λ²„νΌ μμ—­ -->
            <div style="flex-direction: column; justify-content: flex-start; align-items: center; gap: 40px; display: flex;">
                
                <!-- ν…μ¤νΈμ™€ μΈλ””μΌ€μ΄ν„° -->
                <div style="flex-direction: column; justify-content: flex-start; align-items: center; gap: 32px; display: flex;">
                    
                    <!-- ν…μ¤νΈ μμ—­ -->
                    <div style="flex-direction: column; justify-content: flex-start; align-items: center; gap: 16px; display: flex;">
                        <div style="width: 320px; text-align: center; justify-content: center; display: flex; flex-direction: column; color: #1E1E1E; font-size: 28px; font-family: 'Space Grotesk', sans-serif; font-weight: 700; line-height: 32px; word-wrap: break-word;">κ±΄κ°•ν• νΈν΅, λ” λ‚μ€ μ‚¶</div>
                        <div style="width: 280px; text-align: center; justify-content: center; display: flex; flex-direction: column; color: #626262; font-size: 14px; font-family: 'Space Grotesk', sans-serif; font-weight: 400; line-height: 20px; word-wrap: break-word;">AIκ°€ λ¶„μ„ν•λ” κ°μΈ λ§μ¶¤ νΈν΅ κ°•ν™”!<br>λ‹Ήμ‹ λ§μ μ¤λ§νΈ νΈν΅ νΈλ μ΄λ‹ </div>
                    </div>
                    
                    <!-- νμ΄μ§€ μΈλ””μΌ€μ΄ν„° -->
                    <div style="justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex;">
                        <div style="width: 16.97px; height: 4px; background: #1E1E1E; border-radius: 56px;"></div>
                        <div style="width: 4.17px; height: 4px; opacity: 0.30; background: #3D3C3C; border-radius: 56px;"></div>
                    </div>
                    
                </div>
                
                <!-- λ²„νΌ μμ—­ -->
                <div style="justify-content: flex-start; align-items: flex-start; gap: 16px; display: inline-flex;">
                    <button onclick="skipOnboarding()" style="width: 160px; height: 48px; padding: 16px; border-radius: 24px; outline: 1px #2EB5FA solid; outline-offset: -1px; justify-content: center; align-items: center; gap: 10px; display: flex; background: transparent; border: none; cursor: pointer; transition: all 0.3s ease;">
                        <div style="justify-content: center; display: flex; flex-direction: column; color: #2EB5FA; font-size: 16px; font-family: 'Space Grotesk', sans-serif; font-weight: 700; line-height: 16px; word-wrap: break-word;">Skip</div>
                    </button>
                    <button onclick="nextOnboardingStep()" style="width: 159px; height: 48px; padding: 16px; background: #2EB5FA; border-radius: 24px; justify-content: center; align-items: center; gap: 10px; display: flex; border: none; cursor: pointer; transition: all 0.3s ease;">
                        <div style="justify-content: center; display: flex; flex-direction: column; color: white; font-size: 16px; font-family: 'Space Grotesk', sans-serif; font-weight: 700; line-height: 16px; word-wrap: break-word;">Next</div>
                    </button>
                </div>
                
            </div>
            
        </div>
    </div>
    
    <!-- λ‘ λ²μ§Έ μ¨λ³΄λ”© ν™”λ©΄ -->
    <div id="onboardingStep2" class="onboarding-step" style="width: 375px; height: 812px; position: relative; overflow: hidden; display: none;">
        <!-- λ©”μΈ μ½ν…μΈ  μ»¨ν…μ΄λ„ -->
        <div style="height: 702px; left: 20px; top: 61px; position: absolute; flex-direction: column; justify-content: flex-start; align-items: center; gap: 23px; display: inline-flex;">
            
            <!-- λ©”μΈ μ΄λ―Έμ§€ -->
            <div style="width: 335px; height: 419px; position: relative; overflow: hidden; border-radius: 12px;">
                <img src="./images/suumt-onboarding.png" alt="μ¨νΈ μ ν’" style="width: 350px; height: 419px; left: -5px; top: 0px; position: absolute; object-fit: cover;" onerror="this.style.display='none';">
            </div>
            
            <!-- ν…μ¤νΈ λ° λ²„νΌ μμ—­ -->
            <div style="flex-direction: column; justify-content: flex-start; align-items: center; gap: 40px; display: flex;">
                
                <!-- ν…μ¤νΈμ™€ μΈλ””μΌ€μ΄ν„° -->
                <div style="flex-direction: column; justify-content: flex-start; align-items: center; gap: 32px; display: flex;">
                    
                    <!-- ν…μ¤νΈ μμ—­ -->
                    <div style="flex-direction: column; justify-content: flex-start; align-items: center; gap: 16px; display: flex;">
                        <div style="width: 320px; text-align: center; justify-content: center; display: flex; flex-direction: column; color: #1E1E1E; font-size: 26px; font-family: 'Space Grotesk', sans-serif; font-weight: 700; line-height: 30px; word-wrap: break-word;">μ¨νΈμ™€ ν•¨κ» μ‹μ‘ν•μ„Έμ”</div>
                        <div style="width: 280px; text-align: center; justify-content: center; display: flex; flex-direction: column; color: #626262; font-size: 14px; font-family: 'Space Grotesk', sans-serif; font-weight: 400; line-height: 20px; word-wrap: break-word;">AI μ¨νΈλ μ΄λ„μ™€ ν•¨κ»<br>λ‚λ§μ νΈν΅μ΄λ™μ„ μ‹μ‘ν•΄λ³΄μ„Έμ”</div>
                    </div>
                    
                    <!-- νμ΄μ§€ μΈλ””μΌ€μ΄ν„° -->
                    <div style="justify-content: flex-start; align-items: flex-start; gap: 4px; display: inline-flex;">
                        <div style="width: 4.17px; height: 4px; opacity: 0.30; background: #3D3C3C; border-radius: 56px;"></div>
                        <div style="width: 16.97px; height: 4px; background: #1E1E1E; border-radius: 56px;"></div>
                    </div>
                    
                </div>
                
                <!-- λ²„νΌ μμ—­ -->
                <div style="justify-content: flex-start; align-items: flex-start; gap: 16px; display: inline-flex;">
                    <button onclick="skipOnboarding()" style="width: 160px; height: 48px; padding: 16px; border-radius: 24px; outline: 1px #2EB5FA solid; outline-offset: -1px; justify-content: center; align-items: center; gap: 10px; display: flex; background: transparent; border: none; cursor: pointer; transition: all 0.3s ease;">
                        <div style="justify-content: center; display: flex; flex-direction: column; color: #2EB5FA; font-size: 16px; font-family: 'Space Grotesk', sans-serif; font-weight: 700; line-height: 16px; word-wrap: break-word;">Skip</div>
                    </button>
                    <button onclick="skipOnboarding()" style="width: 159px; height: 48px; padding: 16px; background: #2EB5FA; border-radius: 24px; justify-content: center; align-items: center; gap: 10px; display: flex; border: none; cursor: pointer; transition: all 0.3s ease;">
                        <div style="justify-content: center; display: flex; flex-direction: column; color: white; font-size: 16px; font-family: 'Space Grotesk', sans-serif; font-weight: 700; line-height: 16px; word-wrap: break-word;">Start</div>
                    </button>
                </div>
                
            </div>
            
        </div>
    </div>
    
</div>



    <!-- π― μ»¤μ¤ν…€ ν™•μΈ λ¨λ‹¬ -->
    <div id="confirmModal" class="modal-overlay">
        <div class="modal">
            <h3>νΈλ μ΄λ‹ μ¤‘λ‹¨</h3>
            <p>μ •λ§ μ¨νΈλ μ΄λ‹μ„ μ¤‘λ‹¨ν•μ‹κ² μµλ‹κΉ?</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" onclick="hideModal()">μ·¨μ†</button>
                <button class="modal-btn modal-btn-confirm" onclick="confirmStop()">μ¤‘λ‹¨</button>
            </div>
        </div>
    </div>

    <!-- π® λ°°μ§€ νλ“ νμ—… -->
    <div id="badgePopup" class="badge-popup-overlay">
        <div class="badge-popup">
            <div class="badge-popup-icon" id="badgePopupIcon">π†</div>
            <h3>λ°°μ§€ νλ“!</h3>
            <div class="badge-name" id="badgePopupName">μ²« κ±Έμ</div>
            <p id="badgePopupDescription">μ²« λ²μ§Έ νΈν΅ νΈλ μ΄λ‹μ„ μ™„λ£ν•μ…¨μµλ‹λ‹¤!</p>
            <button class="badge-popup-close" onclick="closeBadgePopup()">ν™•μΈ</button>
        </div>
    </div>

    <div class="app-container">
        <!-- λ©”μΈ ν™”λ©΄ -->
        <div id="mainScreen" class="screen active">
            <!-- λ©”μΈ ν—¤λ” -->
            <div class="main-header">
                <div class="user-greeting">
                    <div class="user-info">
                        <div class="user-avatar">
                            <img src="images/suumt-logo.png" alt="μ¨νΈλ μ΄λ„" onerror="this.style.display='none'; this.parentNode.innerHTML='π¤–';">
                        </div>
                        <div class="user-text">
                            <h3 id="userName">AI μ¨νΈλ μ΄λ„</h3>
                            <p id="greetingMessage" class="greeting-message">μ¤λλ„ κΉμ€ νΈν΅μΌλ΅ ν•λ£¨λ¥Ό μ‹μ‘ν•΄λ³΄μ„Έμ”.</p>
                            <!-- π”¥ μƒλ΅μ΄ κΈ°λ¥: λ©”μΈν™”λ©΄ μ‹¤μ‹κ°„ ν„ν™© -->
                            <div class="live-users-badge" id="mainLiveUsers">
                                <div class="live-indicator"></div>
                                <span id="mainLiveUsersText">μ¤λ 247λ… νΈλ μ΄λ‹ μ¤‘</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- μ¤λμ λ©ν‘ μ„Ήμ… -->
            <div class="goal-section">
                <!-- λ©ν‘ λ‹¬μ„± μΉ΄λ“ -->
                <div class="goal-card">
                    <!-- μΉ΄λ“ ν—¤λ” (ν†µν•©λ μ λ©) -->
                    <div class="goal-card-header">
                        <h2 class="goal-card-title">
                            <span class="goal-card-icon">π―</span>
                            <span>μ¤λμ λ©ν‘</span>
                        </h2>
                    </div>

                    <!-- μ›ν• ν”„λ΅κ·Έλ μ¤ -->
                    <div class="circular-progress-container">
                        <svg class="circular-progress" width="240" height="240" viewBox="0 0 200 200">
                            <!-- λ°°κ²½ μ› -->
                            <circle
                                cx="100"
                                cy="100"
                                r="80"
                                fill="none"
                                stroke="#e5e7eb"
                                stroke-width="12"
                            />
                            <!-- μ§„ν–‰λ¥  μ› -->
                            <circle
                                id="progressCircle"
                                cx="100"
                                cy="100"
                                r="80"
                                fill="none"
                                stroke="#667eea"
                                stroke-width="12"
                                stroke-linecap="round"
                                stroke-dasharray="502.65"
                                stroke-dashoffset="502.65"
                                transform="rotate(-90 100 100)"
                                class="progress-stroke"
                            />
                            <!-- 100% λ‹¬μ„± μ΄ν™νΈ μ› (μ¨κ²¨μ§) -->
                            <circle
                                id="celebrationCircle"
                                cx="100"
                                cy="100"
                                r="85"
                                fill="none"
                                stroke="#22c55e"
                                stroke-width="8"
                                stroke-linecap="round"
                                stroke-dasharray="534.07"
                                stroke-dashoffset="534.07"
                                transform="rotate(-90 100 100)"
                                class="celebration-stroke"
                                style="display: none;"
                            />
                        </svg>
                        
                        <!-- μ¤‘μ•™ ν…μ¤νΈ -->
                        <div class="progress-text">
                            <div class="progress-percentage" id="progressPercentage">0%</div>
                            <div class="progress-label" id="progressLabel">λ‹¬μ„±λ¥ </div>
                        </div>
                    </div>

                    <!-- ν•λ‹¨ ν†µκ³„ μΉ΄λ“λ“¤ -->
                    <div class="goal-stats">
                        <div class="goal-stat-card">
                            <div class="stat-number" id="targetBreaths">40</div>
                            <div class="stat-label">λ©ν‘ νΈν΅</div>
                        </div>
                        <div class="goal-stat-card highlight">
                            <div class="stat-number" id="completedBreaths">0</div>
                            <div class="progress-label">μ™„λ£ νΈν΅</div>
                        </div>
                        <div class="goal-stat-card">
                            <div class="stat-number" id="completedSets">0</div>
                            <div class="stat-label">μ™„λ£ μ„ΈνΈ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- μ°¨νΈ μ„Ήμ… -->
            <div class="chart-section">
                <div class="weekly-activity-card">
                    <!-- ν†µν•©λ ν—¤λ” -->
                    <div class="weekly-card-header">
                        <h2 class="weekly-card-title">
                            <span class="weekly-card-icon">π“</span>
                            <span>μ£Όκ°„ ν™λ™</span>
                        </h2>
                        <div class="weekly-card-subtitle" id="chartSubtitle">μ΄λ² μ£Ό νΈλ μ΄λ‹ μ„±κ³Όλ¥Ό ν•λμ—</div>
                    </div>
                    
                    <!-- μ°¨νΈ μμ—­ -->
                    <div class="weekly-chart-area">
                        <div class="chart-legend">μ™„λ£ν• μ„ΈνΈ μ (μΌλ³„)</div>
                        <div class="chart-area">
                            <div class="chart-y-axis">
                                <div class="y-label">4</div>
                                <div class="y-label">3</div>
                                <div class="y-label">2</div>
                                <div class="y-label">1</div>
                                <div class="y-label">0</div>
                            </div>
                            <div class="chart-bars" id="chartBars">
                                <div class="chart-bar" style="height: 0%" data-day="0"></div>
                                <div class="chart-bar" style="height: 0%" data-day="1"></div>
                                <div class="chart-bar" style="height: 0%" data-day="2"></div>
                                <div class="chart-bar" style="height: 0%" data-day="3"></div>
                                <div class="chart-bar" style="height: 0%" data-day="4"></div>
                                <div class="chart-bar" style="height: 0%" data-day="5"></div>
                                <div class="chart-bar" style="height: 0%" data-day="6"></div>
                            </div>
                        </div>
                        <div class="chart-x-axis" id="chartXAxis">
                            <div class="x-label">μΌ</div>
                            <div class="x-label">μ›”</div>
                            <div class="x-label">ν™”</div>
                            <div class="x-label">μ</div>
                            <div class="x-label">λ©</div>
                            <div class="x-label">κΈ</div>
                            <div class="x-label">ν† </div>
                        </div>
                                        </div>
                    
                    <!-- μƒλ΅μ΄ λ©”μ‹ μ € μ¤νƒ€μΌ HTML (κΈ°μ΅΄ μ„μΉμ— μ •ν™•ν μ¶”κ°€) -->
                    <div class="trainer-chat">
                        <div class="chat-header">
                            <img src="icons/coach-avatar.png" class="trainer-avatar" alt="μ¨νΈλ μ΄λ„">
                            <span class="trainer-name">μ¨νΈλ μ΄λ„</span>
                        </div>
                        <div class="chat-bubble" id="chatBubble">
                            <div class="chat-loading">
                                <div class="typing-dots">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>

        <!-- μ΄λ™ ν™”λ©΄ -->
        <div id="exerciseScreen" class="screen">
            <div class="container">
                <div id="countdownSection">
                    <h2>νΈλ μ΄λ‹μ„ μ‹μ‘ν• κ²μ”</h2>
                    <div class="countdown" id="countdown">3</div>
                </div>

                <div id="breathingSection" style="display: none;">
                    <div class="breathing-circle" id="breathingCircle">
                        <span id="circleText">μ¤€λΉ„</span>
                    </div>
                    
                    <div class="progress-container">
                        <div class="sets-progress">
                            <div class="progress-label">μ„ΈνΈ μ§„ν–‰λ„</div>
                            <div class="sets-indicators" id="setsIndicators">
                                <div class="set-indicator"></div>
                                <div class="set-indicator"></div>
                            </div>
                            <div class="progress-numbers" id="setNumbers">1 / 2 μ„ΈνΈ</div>
                        </div>
                        
                        <div class="breaths-progress">
                            <div class="progress-label">νΈν΅ νμ</div>
                            <div class="breaths-indicators" id="breathsIndicators">
                                <!-- 10κ°μ νΈν΅ μ λ“¤μ΄ JavaScriptλ΅ μƒμ„±λ¨ -->
                            </div>
                            <div class="progress-numbers" id="breathNumbers">1 / 10 ν</div>
                        </div>
                    </div>
                    
                    <div class="control-buttons">
                        <button class="btn btn-secondary" onclick="pauseExercise()">μΌμ‹μ •μ§€</button>
                        <button class="btn btn-secondary" onclick="showStopModal()">μ¤‘λ‹¨</button>
                    </div>
                </div>

                <div id="restSection" style="display: none;">
                    <h2>ν΄μ‹ μ‹κ°„</h2>
                    <div class="countdown" id="restCountdown">2:00</div>
                    <p>λ‹¤μ μ„ΈνΈκΉμ§€ νΈν΅μ„ μ •λ¦¬ν•μ„Έμ”</p>
                    <div class="progress-numbers" id="restProgressText">1μ„ΈνΈ μ™„λ£</div>
                    
                    <div class="control-buttons" id="restControlButtons" style="display: none;">
                        <button class="btn btn-success" onclick="skipRest()">ν΄μ‹ κ±΄λ„λ›°κΈ°</button>
                        <button class="btn btn-secondary" onclick="showStopModal()">μ¤‘λ‹¨</button>
                    </div>
                </div>

                <!-- π® ν€΄μ¦ μ μ• ν™”λ©΄ -->
                <div id="quizOfferSection" style="display: none;">
                    <h2>ν΄μ‹ μ‹κ°„</h2>
                    <div class="countdown" id="quizOfferCountdown">2:00</div>
                    
                    <div class="quiz-offer-card">
                        <div class="quiz-offer-title">κ°„λ‹¨ν• ν€΄μ¦ ν’€κΉμ”?</div>
                        <div class="quiz-offer-subtitle" id="quizOfferSubtitle">2λ¬Έμ λ§! νΉλ³„ ννƒλ„ λ°›μΌμ„Έμ”</div>
                        
                        <div class="quiz-offer-buttons">
                            <button class="quiz-offer-primary" onclick="startQuiz()" id="quizOfferButton">
                                ν€΄μ¦ ν’€κ³  15% ν• μΈλ°›κΈ°
                            </button>
                            <button class="quiz-offer-secondary" onclick="chooseRestOnly()">
                                ν΄μ‹λ§ ν•κΈ°
                            </button>
                        </div>
                    </div>
                </div>

                <!-- π§  ν€΄μ¦ μ§„ν–‰ ν™”λ©΄ -->
                <div id="quizProgressSection" style="display: none;">
                    <div class="quiz-progress-header">
                        <h2>ν€΄μ¦ νƒ€μ„!</h2>
                        <div class="countdown" id="quizCountdown">2:00</div>
                        
                        <div class="quiz-progress-bar">
                            <div class="quiz-progress-fill" id="quizProgressFill" style="width: 50%"></div>
                        </div>
                        <div class="quiz-progress-text" id="quizProgressText">λ¬Έμ  1 / 2</div>
                    </div>
                    
                    <div class="quiz-question-card">
                        <div class="quiz-question" id="quizQuestion">λ¬Έμ κ°€ μ—¬κΈ°μ— ν‘μ‹λ©λ‹λ‹¤</div>
                        <div class="quiz-options" id="quizOptions">
                            <!-- μ„ νƒμ§€λ“¤μ΄ JavaScriptλ΅ μƒμ„±λ¨ -->
                        </div>
                        <div class="quiz-explanation" id="quizExplanation" style="display: none;">
                            μ„¤λ…μ΄ μ—¬κΈ°μ— ν‘μ‹λ©λ‹λ‹¤
                        </div>
                    </div>
                </div>

                <!-- π ν€΄μ¦ λ³΄μƒ ν™”λ©΄ -->
                <div id="quizRewardSection" style="display: none;">
                    <h2>ν΄μ‹ μ‹κ°„</h2>
                    <div class="countdown" id="quizRewardCountdown">2:00</div>
                    
                    <div class="quiz-reward-card">
                        <div class="quiz-reward-title">π‰ ν€΄μ¦ μ™„λ£!</div>
                        <div class="quiz-reward-subtitle" id="quizRewardSubtitle">2λ¬Έμ  λ¨λ‘ μ •λ‹µ! νΉλ³„ ννƒμ„ λ°›μΌμ„Έμ”</div>
                        
                        <div class="quiz-product-showcase">
                            <div class="quiz-product-image">
                                <img src="./images/suumt-product.png" alt="μ¨νΈ μ ν’" id="rewardProductImage" 
                                     onerror="this.style.display='none'; this.parentNode.innerHTML='π';">
                            </div>
                            <div class="quiz-product-name" id="rewardProductName">μ¨νΈ νΈν΅μ΄λ™κΈ°κµ¬</div>
                            <div class="quiz-product-description" id="rewardProductDescription">μ•± μ‚¬μ©μλ§μ„ μ„ν• νΉλ³„κ°€</div>
                            <div class="quiz-product-price-line">
                                <span class="quiz-original-price" id="rewardOriginalPrice">89,000μ›</span>
                                <span class="quiz-price-arrow">β†’</span>
                                <span class="quiz-discount-price" id="rewardDiscountPrice">75,650μ›</span>
                                <span class="quiz-discount-badge" id="rewardDiscountBadge">15%β†“</span>
                            </div>
                        </div>
                        
                        <div class="quiz-dual-buttons">
                            <button class="quiz-check-button" onclick="checkSpecialOffer()">
                                π‘€ νΉκ°€ ν™•μΈν•κΈ°
                            </button>
                            <button class="quiz-continue-button" onclick="continueToNextSet()">
                                π’ λ‹¤μ μ„ΈνΈ μ‹μ‘
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ν”Όλ“λ°± νμ΄μ§€ -->
        <div id="feedbackScreen" class="screen">
            <div class="container">
                <h2 id="feedbackTitle">μ§€κΈ νΈν΅ν•λ” λλ‚μ΄ μ–΄λ– μ„Έμ”?</h2>
                <p class="subtitle" id="feedbackDescription">λ°©κΈ μ™„λ£ν• νΈλ μ΄λ‹μ κ°•λ„λ” μ–΄λ– μ…¨λ‚μ”?</p>
                
                <div class="feedback-options">
                    <button class="feedback-option easy" onclick="selectFeedback('easy')">
                        <div class="feedback-text">λ„λ¬΄ νΈν•΄μ”</div>
                        <div class="feedback-desc" style="display: none;">λ” κ°•ν• κ°•λ„λ΅ λ„μ „ν•  μ μμ–΄μ”</div>
                    </button>
                    
                    <button class="feedback-option perfect" onclick="selectFeedback('perfect')">
                        <div class="feedback-text">λ”± μΆ‹μ•„μ”</div>
                        <div class="feedback-desc" style="display: none;">μ λ‹Ήν νλ“¤λ©΄μ„ μ™„μ£Όν•  μ μμ—μ–΄μ”</div>
                    </button>
                    
                    <button class="feedback-option hard" onclick="selectFeedback('hard')">
                        <div class="feedback-text">λ„λ¬΄ νλ“¤μ–΄μ”</div>
                        <div class="feedback-desc" style="display: none;">κ°•λ„λ¥Ό λ‚®μ¶°μ„ μ•μ „ν•κ² μ΄λ™ν•κ³  μ‹¶μ–΄μ”</div>
                    </button>
                </div>
                
                <!-- AI μ΅°μ–Έ μμ—­ -->
                <div id="aiAdviceSection" style="display: none;">
                    <div id="aiAdviceCard">
                        <img src="icons/coach-avatar.png" alt="AI νΈλ μ΄λ„" style="width: 32px; height: 32px; border-radius: 50%;">
                        <div id="aiAdviceText"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- κ²°κ³Ό ν™”λ©΄ -->
        <div id="resultScreen" class="screen">
            <div class="container">
                <div class="result-header">
                    <h2>νΈλ μ΄λ‹ μ™„λ£!</h2>
                </div>
                
                <div class="result-stats-grid">
                    <div class="result-stat-card">
                        <div class="stat-label">μ €ν•­ κ°•λ„</div>
                        <div class="stat-value" id="resistanceInfo">1/1</div>
                    </div>
                    
                    <div class="result-stat-card">
                        <div class="stat-label">μ΄ μ‹κ°„</div>
                        <div class="stat-value" id="totalTime">0λ¶„</div>
                    </div>
                    
                    <div class="result-stat-card">
                        <div class="stat-label">μ™„λ£ μ„ΈνΈ</div>
                        <div class="stat-value" id="completedSets">0/2</div>
                    </div>
                    
                    <div class="result-stat-card">
                        <div class="stat-label">μ΄ νΈν΅νμ</div>
                        <div class="stat-value" id="totalBreathsResult">0ν</div>
                    </div>
                </div>

                <!-- π® λ°°μ§€ μ‹μ¤ν… (ν”„λ΅ν•„ νƒ­μ—μ„ μ¬μ‚¬μ© μμ • - μ¨κΉ€ μ²λ¦¬) -->
                <div class="badges-system" style="display: none;">
                    <div class="badges-header">
                        <span class="section-icon">π†</span>
                        <span class="badges-title">λ°°μ§€ μ»¬λ ‰μ…</span>
                    </div>
                    <div class="badges-progress" id="badgesProgress">μμ§‘ν• λ°°μ§€: 0/15</div>
                    <div class="badges-grid" id="badgesGrid">
                        <!-- λ°°μ§€λ“¤μ΄ JavaScriptλ΅ μƒμ„±λ¨ -->
                    </div>
                </div>



                <div id="achievementBadges"></div>

                <div class="result-content">
                    <div class="ai-analysis-section">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 2px solid #F1F5F9;">
                            <div style="display: flex; align-items: center; gap: 8px; flex-grow: 1;">
                                <h4>λ°©κΈ μ΄λ™ μ–΄λ– μ…¨λ‚μ”?</h4>
                            </div>
                            <div id="aiAnalysisBadge" style="background: rgba(102, 126, 234, 0.1); border: 1px solid #667eea; color: #667eea; padding: 6px 12px; border-radius: 12px; font-size: 11px; font-weight: 600;">λ¶„μ„ λ€κΈ°</div>
                        </div>
                        
                        <div id="aiAnalysisContent">
                            <div style="text-align: center; padding: 32px 0;">
                                <img src="icons/coach-avatar.png" style="width: 32px; height: 32px; border-radius: 50%; margin-bottom: 16px;" alt="AI">
                                <p style="margin: 0 0 24px 0; font-size: 14px; color: #6b7280; line-height: 1.5;">
                                    λ°©κΈ μ™„λ£ν• μ΄λ™μ„ AIκ°€ λ¶„μ„ν•΄μ„<br>
                                    κ°μΈν™”λ μ΅°μ–Έμ„ λ°›μ•„λ³΄μ„Έμ”
                                </p>
                                <button onclick="requestResultAIAnalysis()" style="background: rgba(102, 126, 234, 0.1); border: 1px solid #667eea; border-radius: 12px; padding: 12px 24px; color: #667eea; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    AI μ΄λ™ λ¶„μ„ λ°›κΈ°
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-buttons">
                    <button class="btn btn-success" onclick="startExercise()">λ‹¤μ‹ ν•κΈ°</button>
                    <button class="btn" onclick="goToMain()">ν™μΌλ΅</button>
                </div>
            </div>
        </div>

        <!-- π’ μ΄λ™λ¨λ“ μ„ νƒ ν™”λ©΄ -->
        <div id="workoutModeScreen" class="screen">
            <div class="workout-mode-header" style="text-align: center; margin: max(40px, env(safe-area-inset-top)) 20px 24px; padding: 0;">
                <h2 style="font-size: 24px; font-weight: 700; color: #1E1E1E; margin-bottom: 8px;">μ΄λ™λ¨λ“ μ„ νƒ</h2>
                <p style="font-size: 14px; color: #6b7280; margin: 0;">μ¤λμ€ μ–΄λ–¤ νΈν΅ μ΄λ™μ„ ν•μ‹κ² μ–΄μ”?</p>
            </div>
            
            <div class="workout-modes-container" style="padding: 0; margin: 0;">
                <!-- μ›μ—… λ¨λ“ (λΉ„ν™μ„±ν™”) -->
                <div class="workout-mode-card disabled" style="background: white; border: 1px solid #E7E7E7; border-radius: 24px; padding: 20px; margin: 0 20px 24px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; position: relative; opacity: 0.6;">
                    <div class="mode-illustration">
                        <div class="mode-avatar">
                            <div class="avatar-bg warmup"></div>
                            <div class="avatar-icon">π…</div>
                        </div>
                    </div>
                    <div class="mode-content">
                        <h3>μ›μ—…</h3>
                        <p>κ°€λ²Όμ΄ νΈν΅μΌλ΅ λΈμ„ κΉ¨μ°κ³  ν•λ£¨λ¥Ό μ¤€λΉ„ν•μ„Έμ”.</p>
                        <div class="mode-pattern">2 - 2 - 2 νΈν΅</div>
                    </div>
                    <div class="mode-status">κ³§ μ¶μ‹</div>
                </div>
                
                <!-- μ¨νΈλ μ΄λ‹ λ¨λ“ (ν™μ„±ν™”) -->
                <div class="workout-mode-card active" style="background: white; border: 1px solid #E7E7E7; border-radius: 24px; padding: 20px; margin: 0 20px 24px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; cursor: pointer; position: relative;" onclick="selectWorkoutMode('breathtraining')">
                    <div class="mode-illustration">
                        <div class="mode-avatar">
                            <div class="avatar-bg breathtraining"></div>
                            <div class="avatar-icon">π«</div>
                        </div>
                    </div>
                    <div class="mode-content">
                        <h3>μ¨νΈλ μ΄λ‹</h3>
                        <p>νΈν΅κ·Όμ΅μ„ κ°•ν™”ν•κ³  νν™λ‰μ„ λλ ¤λ³΄μ„Έμ”.</p>
                        <div class="mode-pattern">3 - 1 - 3 - 1 νΈν΅</div>
                    </div>
                    <div class="mode-status">μ„ νƒ κ°€λ¥</div>
                </div>
                
                <!-- μ λ“¤κΈ°μ „ λ¨λ“ (λΉ„ν™μ„±ν™”) -->
                <div class="workout-mode-card disabled" style="background: white; border: 1px solid #E7E7E7; border-radius: 24px; padding: 20px; margin: 0 20px 24px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; position: relative; opacity: 0.6;">
                    <div class="mode-illustration">
                        <div class="mode-avatar">
                            <div class="avatar-bg sleep"></div>
                            <div class="avatar-icon">π™</div>
                        </div>
                    </div>
                    <div class="mode-content">
                        <h3>μ λ“¤κΈ°μ „</h3>
                        <p>κΈ΄μ¥μ„ ν’€κ³  νΈμ•ν• μλ©΄μ„ μ„ν• νΈν΅λ²•μ…λ‹λ‹¤.</p>
                        <div class="mode-pattern">4 - 7 - 8 νΈν΅</div>
                    </div>
                    <div class="mode-status">κ³§ μ¶μ‹</div>
                </div>
            </div>
        </div>

        <!-- π« μ¨νΈλ μ΄λ‹ λ¨λ“ ν™”λ©΄ -->
        <div id="breathTrainingScreen" class="screen">
            
            <!-- 1. ν—¤λ” μΉ΄λ“ (κΈ°λ΅νƒ­ 4μ£Ό μ±λ¦°μ§€μ™€ λ™μΌν• μ¤νƒ€μΌ) -->
            <div style="background: white; border: 1px solid #E7E7E7; border-radius: 24px; margin: max(40px, env(safe-area-inset-top)) 20px 24px; padding: 20px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; text-align: center;">
                <h2 style="font-size: 20px; font-weight: 700; color: #1E1E1E; margin-bottom: 8px;">μ¨νΈλ μ΄λ‹ λ¨λ“</h2>
                <p style="font-size: 14px; color: #6b7280; margin: 0;">νΈν΅ κ°€μ΄λ“, μ €ν•­ μ„¤μ •, νΈλ μ΄λ‹ μ‹μ‘</p>
            </div>

            <!-- 2. κ°€μ΄λ“ μΉ΄λ“ (λ…λ¦½μ μΈ μΉ΄λ“) -->
            <div class="guide-card" style="background: white; border: 1px solid #E7E7E7; border-radius: 24px; margin: 0 20px 24px; padding: 20px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); transition: all 0.3s ease;">
                <div class="guide-header" style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                    <h3 class="guide-title" style="font-size: 18px; font-weight: 600; color: #1E1E1E; margin: 0;">νΈλ μ΄λ‹ κ°€μ΄λ“</h3>
                </div>
                
                <div class="important-notice" style="display: flex; align-items: flex-start; margin-bottom: 16px; padding: 8px 12px; background: rgba(102, 126, 234, 0.08); border-radius: 8px; border: 1px solid rgba(102, 126, 234, 0.15);">
                    <span class="important-icon" style="color: #667eea; font-size: 14px; margin-right: 6px; margin-top: 1px; flex-shrink: 0; font-weight: bold;">β“</span>
                    <span class="important-text" style="color: #1E1E1E; font-weight: 500; font-size: 13px; line-height: 1.4;">νΈν΅ν•  λ•λ” μμ‹μ μΌλ΅ νμ„ μ£Όμ–΄ κΉκ² νΈν΅ν•μ„Έμ”!</span>
                </div>
                
                <div class="guide-step" style="color: #555; font-size: 14px; line-height: 1.5; margin-bottom: 8px; padding-left: 16px; position: relative;">μ¨νΈ κΈ°κµ¬μ λ‹¤μ΄μ–Όμ„ λλ ¤ μ €ν•­ κ°•λ„λ¥Ό μ„¤μ •ν•΄μ£Όμ„Έμ”</div>
                <div class="guide-step" style="color: #555; font-size: 14px; line-height: 1.5; margin-bottom: 8px; padding-left: 16px; position: relative;">μ„¤μ •ν• μ €ν•­ κ°•λ„λ¥Ό μ•„λ ν™”λ©΄μ— λ‘κ°™μ΄ μ…λ ¥ν•μ„Έμ”</div>
                <div class="guide-step" style="color: #555; font-size: 14px; line-height: 1.5; margin-bottom: 0; padding-left: 16px; position: relative;">λ³µμ‹νΈν΅μΌλ΅ μ½”κ°€ μ•„λ‹ μ…μΌλ΅λ§ νΈν΅ν•μ„Έμ”</div>
            </div>

            <!-- 3. μ €ν•­ μ„¤μ • μΉ΄λ“ (λ…λ¦½μ μΈ μΉ΄λ“) -->
            <div class="resistance-card" style="background: white; border: 1px solid #E7E7E7; border-radius: 24px; margin: 0 20px 24px; padding: 20px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; text-align: center;">
                <div class="resistance-header" style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px; justify-content: center;">
                    <h3 class="resistance-title" style="font-size: 18px; font-weight: 600; color: #1E1E1E; margin: 0;">μ €ν•­ κ°•λ„ μ„¤μ •</h3>
                </div>
                
                <div class="resistance-controls" style="display: flex; justify-content: space-around; align-items: center; width: 100%; gap: 12px; margin-bottom: 16px;">
                    <!-- λ“¤μ¨ μ»¨νΈλ΅¤ -->
                    <div class="resistance-control" style="background: #F8F9FA; border-radius: 16px; padding: 12px; text-align: center; flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px;">
                        <div class="resistance-label" style="font-size: 13px; font-weight: 600; color: #1E1E1E; margin-bottom: 8px; text-align: center; line-height: 1.2;">λ“¤μ¨ (Inhale)</div>
                        <div class="resistance-selector" style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 8px;">
                            <button class="resistance-btn" onclick="adjustResistance('inhale', -1)" style="width: 32px; height: 32px; border-radius: 50%; border: none; background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-size: 16px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center;">-</button>
                            <div class="resistance-value" id="inhaleLevel" style="font-size: 20px; font-weight: bold; color: #667eea; min-width: 32px; text-align: center; line-height: 1;">1</div>
                            <button class="resistance-btn" onclick="adjustResistance('inhale', 1)" style="width: 32px; height: 32px; border-radius: 50%; border: none; background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-size: 16px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center;">+</button>
                        </div>
                        <div class="resistance-dots" id="inhaleScale" style="display: flex; justify-content: center; gap: 6px;">
                            <div class="dot active"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                    </div>

                    <!-- λ‚ μ¨ μ»¨νΈλ΅¤ -->
                    <div class="resistance-control" style="background: #F8F9FA; border-radius: 16px; padding: 12px; text-align: center; flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px;">
                        <div class="resistance-label" style="font-size: 13px; font-weight: 600; color: #1E1E1E; margin-bottom: 8px; text-align: center; line-height: 1.2;">λ‚ μ¨ (Exhale)</div>
                        <div class="resistance-selector" style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 8px;">
                            <button class="resistance-btn" onclick="adjustResistance('exhale', -1)" style="width: 32px; height: 32px; border-radius: 50%; border: none; background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-size: 16px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center;">-</button>
                            <div class="resistance-value" id="exhaleLevel" style="font-size: 20px; font-weight: bold; color: #667eea; min-width: 32px; text-align: center; line-height: 1;">1</div>
                            <button class="resistance-btn" onclick="adjustResistance('exhale', 1)" style="width: 32px; height: 32px; border-radius: 50%; border: none; background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-size: 16px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center;">+</button>
                        </div>
                        <div class="resistance-dots" id="exhaleScale" style="display: flex; justify-content: center; gap: 6px;">
                            <div class="dot active"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                    </div>
                </div>
                
                <div class="resistance-tip" style="text-align: center; font-size: 11px; color: #666; background: rgba(102, 126, 234, 0.1); padding: 8px 12px; border-radius: 12px; line-height: 1.3; margin-top: 8px;">μ²μμ΄μ‹λ©΄ 1λ‹¨κ³„ μ¶”μ² β€Ά μ λ‹Ήν νλ“  κ°•λ„κ°€ μµμ μ΄μ—μ”!</div>
            </div>

            <!-- 4. μ‹μ‘ λ²„νΌ (μΉ΄λ“ λ°–μ— λ…λ¦½μ μΌλ΅) -->
            <button class="start-button" onclick="startExercise()" style="width: calc(100% - 40px); height: 60px; background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; border-radius: 30px; font-size: 18px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3); display: flex; align-items: center; justify-content: center; gap: 8px; margin: 0 20px 40px;">
                νΈλ μ΄λ‹ μ‹μ‘
            </button>

        </div>

        <!-- π“’ μ΄λ™ κΈ°λ΅ ν™”λ©΄ -->
        <div id="recordsScreen" class="screen">
            <div class="section-header">
                <h2 class="section-title"><span class="section-icon">π“’</span> μ΄λ™ κΈ°λ΅</h2>
                <p class="section-subtitle">μ΄λ™ν• λ‚ κ³Ό AI μ΅°μ–Έ μ”μ•½μ„ ν™•μΈν•μ„Έμ”</p>
            </div>

            <!-- Calendar -->
            <div class="records-calendar card">
                <div class="calendar-header">
                    <button class="calendar-nav-btn" id="prevMonthBtn">β€Ή</button>
                    <h3 class="calendar-title" id="calendarTitle">2025λ…„ 1μ›”</h3>
                    <button class="calendar-nav-btn" id="nextMonthBtn">β€Ί</button>
                </div>
                <table class="calendar-table">
                    <thead>
                        <tr>
                            <th>μΌ</th>
                            <th>μ›”</th>
                            <th>ν™”</th>
                            <th>μ</th>
                            <th>λ©</th>
                            <th>κΈ</th>
                            <th>ν† </th>
                        </tr>
                    </thead>
                    <tbody id="calendarBody">
                        <!-- λ‹¬λ ¥ λ‚ μ§λ“¤μ΄ JavaScriptλ΅ λ™μ  μƒμ„±λ¨ -->
                    </tbody>
                </table>
                <div class="calendar-loading" id="calendarLoading" style="display: none;">
                    π“ μ΄λ™ κΈ°λ΅μ„ λ¶λ¬μ¤λ” μ¤‘...
                </div>
            </div>

            <!-- Selected Day Summary -->
            <div class="records-summary card">
                <h3>μ„ νƒν• λ‚ μ§: <span id="selectedDate">-</span></h3>
                <ul id="recordSummaryList">
                    <li>μ΄λ™ μ„ΈνΈ μ: -</li>
                    <li>μ΄ μ΄λ™ μ‹κ°„: -</li>
                    <li>ν‰κ·  μ €ν•­ κ°•λ„: -</li>
                </ul>
            </div>

            <!-- AI Advice Summary -->
            <div class="records-ai-advice card">
                <div class="ai-advice-header">
                    <div class="ai-advice-title">
                        <span class="ai-advice-icon">π¤–</span>
                        <h3>π¤– AI μ¨νΈλ μ΄λ„ μΆ…ν•© λ¶„μ„</h3>
                    </div>
                    <div class="ai-advice-badge" id="aiAdviceBadge" style="display: none;">
                        μƒλ΅μ΄ μ΅°μ–Έ
                    </div>
                </div>
                <div class="ai-advice-content">
                    <div class="ai-advice-loading" id="aiAdviceLoading" style="display: none;">
                        <div class="loading-spinner"></div>
                        <span>AIκ°€ μ΅°μ–Έμ„ λ¶„μ„ν•λ” μ¤‘...</span>
                    </div>
                    <div class="ai-advice-text" id="aiAdviceSummary">
                        λ‚ μ§λ¥Ό μ„ νƒν•λ©΄ AI μ¨νΈλ μ΄λ„μ κ°μΈν™”λ μ΅°μ–Έμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
                    </div>
                    <div class="ai-advice-empty" id="aiAdviceEmpty" style="display: none;">
                        <div class="empty-state-icon">π’­</div>
                        <p>μ„ νƒν• λ‚ μ§μ— AI μ΅°μ–Έμ΄ μ—†μµλ‹λ‹¤.</p>
                        <small>μ΄λ™ μ™„λ£ ν›„ AIκ°€ λ¶„μ„ν• μ΅°μ–Έμ„ μ—¬κΈ°μ„ ν™•μΈν•μ„Έμ”.</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- π‘¤ ν”„λ΅ν•„ ν™”λ©΄ -->
        <div id="profileScreen" class="screen">
            <!-- ν”„λ΅ν•„ νƒ­μ€ JavaScriptλ΅ λ™μ  μƒμ„±λ©λ‹λ‹¤ -->
        </div>
    </div>
  </div>

  <!-- π€ ν•λ‹¨ λ„¤λΉ„κ²μ΄μ… λ°” -->
    <nav id="bottomNavigation" class="bottom-nav">
        <button class="nav-btn active" data-tab="home" onclick="switchTab('home')">
            <div class="nav-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9,22 9,12 15,12 15,22"/>
                </svg>
            </div>
            <div class="nav-label">ν™</div>
        </button>
        
        <button class="nav-btn" data-tab="workout" onclick="switchTab('workout')">
            <div class="nav-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2v20m8-18H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/>
                    <path d="M8 6v4m8-4v4"/>
                </svg>
            </div>
            <div class="nav-label">μ΄λ™λ¨λ“</div>
        </button>
        
        <button class="nav-btn" data-tab="records" onclick="switchTab('records')">
            <div class="nav-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
            </div>
            <div class="nav-label">κΈ°λ΅</div>
        </button>
        
        <button class="nav-btn" data-tab="profile" onclick="switchTab('profile')">
            <div class="nav-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                </svg>
            </div>
            <div class="nav-label">ν”„λ΅ν•„</div>
        </button>
    </nav>

    <style>
    /* π€ ν•λ‹¨ λ„¤λΉ„κ²μ΄μ… λ°” μ¤νƒ€μΌ */
    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 70px;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(0, 0, 0, 0.08);
        display: flex;
        justify-content: space-around;
        align-items: center;
        z-index: 1000;
        padding: 0 20px;
        box-shadow: 0 -2px 20px rgba(0, 0, 0, 0.06);
    }

    .nav-btn {
        background: none;
        border: none;
        padding: 8px 16px;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-width: 60px;
        color: #6b7280;
    }

    .nav-btn:hover {
        background: rgba(102, 126, 234, 0.08);
        transform: translateY(-2px);
    }

    .nav-btn.active {
        background: rgba(102, 126, 234, 0.12);
        color: #667eea;
    }

    .nav-btn.active .nav-icon {
        transform: scale(1.05);
    }

    .nav-icon {
        margin-bottom: 4px;
        transition: transform 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .nav-icon svg {
        transition: all 0.3s ease;
    }

    .nav-btn.active .nav-icon svg {
        stroke: #667eea;
        stroke-width: 2.5;
    }

    .nav-label {
        font-size: 10px;
        font-weight: 500;
        opacity: 0.7;
        transition: all 0.3s ease;
    }

    .nav-btn.active .nav-label {
        opacity: 1;
        font-weight: 600;
        color: #667eea;
    }

    /* λ©”μΈ μ½ν…μΈ  ν•λ‹¨ μ—¬λ°± ν™•λ³΄ (λ„¤λΉ„κ²μ΄μ… κ³µκ°„) */
    .screen {
        padding-bottom: 80px;
        display: none;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .screen.active {
        display: block;
        opacity: 1;
    }
    
    .screen.fade-out {
        opacity: 0;
    }

    /* λ¨λ°”μΌ μµμ ν™” */
    @media (max-width: 480px) {
        .bottom-nav {
            height: 65px;
            padding: 0 15px;
        }
        
        .nav-btn {
            padding: 6px 12px;
            min-width: 50px;
        }
        
        .nav-label {
            font-size: 9px;
        }
        
        .screen {
            padding-bottom: 75px;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .screen.active {
            display: block;
            opacity: 1;
        }
        
        .screen.fade-out {
            opacity: 0;
        }
    }

    /* π’ μ΄λ™λ¨λ“ μ„ νƒ ν™”λ©΄ μ¤νƒ€μΌ */
    .workout-mode-header {
        text-align: center;
        padding: 20px;
        margin-bottom: 20px;
    }

    .workout-mode-header h2 {
        font-size: 24px;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 8px;
    }

    .workout-mode-header p {
        font-size: 16px;
        color: #6b7280;
        margin: 0;
    }

    .workout-modes-container {
        padding: 0 20px;
        display: flex;
        flex-direction: column;
        gap: 16px;
    }

    /* κΈ°μ΅΄ .workout-mode-card μ¤νƒ€μΌ μ κ±°ν•κ³  μΈλΌμΈμΌλ΅ ν†µμΌ */
    .workout-mode-card {
        /* κΈ°μ΅΄ μ¤νƒ€μΌ μ κ±° - μΈλΌμΈ μ¤νƒ€μΌλ΅ λ€μ²΄λ¨ */
        display: flex;
        align-items: center;
        gap: 16px;
    }

    /* νΈλ²„ ν¨κ³Όλ§ μ μ§€ν•λ κΈ°λ΅νƒ­κ³Ό ν†µμΌ */
    .workout-mode-card.active:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;
    }

    .workout-mode-card.disabled:hover {
        transform: none !important;
    }

    .mode-illustration {
        flex-shrink: 0;
    }

    .mode-avatar {
        width: 60px;
        height: 60px;
        position: relative;
        border-radius: 50%;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .avatar-bg {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 50%;
    }

    .avatar-bg.warmup {
        background: linear-gradient(135deg, #fef3c7 0%, #fbbf24 100%);
    }

    .avatar-bg.breathtraining {
        background: linear-gradient(135deg, #ddd6fe 0%, #8b5cf6 100%);
    }

    .avatar-bg.sleep {
        background: linear-gradient(135deg, #e0e7ff 0%, #6366f1 100%);
    }

    .avatar-icon {
        font-size: 24px;
        position: relative;
        z-index: 1;
    }

    .mode-content {
        flex-grow: 1;
    }

    .mode-content h3 {
        font-size: 18px;
        font-weight: 600;
        color: #1f2937;
        margin: 0 0 4px 0;
    }

    .mode-content p {
        font-size: 14px;
        color: #6b7280;
        margin: 0 0 8px 0;
        line-height: 1.4;
    }

    .mode-pattern {
        font-size: 12px;
        font-weight: 600;
        color: #667eea;
        background: rgba(102, 126, 234, 0.1);
        padding: 4px 8px;
        border-radius: 6px;
        display: inline-block;
    }

    .mode-status {
        position: absolute;
        top: 12px;
        right: 12px;
        font-size: 10px;
        font-weight: 600;
        padding: 4px 8px;
        border-radius: 8px;
        text-transform: uppercase;
    }

    .workout-mode-card.active .mode-status {
        background: #667eea;
        color: white;
    }

    .workout-mode-card.disabled .mode-status {
        background: #e5e7eb;
        color: #9ca3af;
    }

    /* λ¨λ°”μΌ μµμ ν™” - μ΄λ™λ¨λ“ ν™”λ©΄ */
    @media (max-width: 480px) {
        .workout-mode-card {
            margin: 0 16px 24px !important;
            padding: 16px !important;
            gap: 12px;
        }
        
        .workout-mode-header {
            margin: max(40px, env(safe-area-inset-top)) 16px 24px !important;
        }
        
        .mode-avatar {
            width: 50px;
            height: 50px;
        }
        
        .avatar-icon {
            font-size: 20px;
        }
        
        .mode-content h3 {
            font-size: 16px;
        }
        
        .mode-content p {
            font-size: 13px;
        }
    }

    /* μƒλ‹¨ μ•μ „ μ—¬λ°± μ²λ¦¬ */
    #breathTrainingScreen .section-header {
        margin-top: max(24px, env(safe-area-inset-top));
        /* λ¨λ°”μΌ notch κ³ λ ¤ */
    }
    </style>

</body>
</html>
